<div ng-controller="TraineeCtrl as tctrl">
    <a href="#/trainees/form" class="btn btn-default btn-sm">Auszubildenden hinzufügen</a>
    <br></br>
    <input type="checkbox" ng-model="filter">Filter aktivieren</input>

    <table  class="table" ng-show="filter" title="Filter">
        <tr>
            <th>ID</th>
            <th>Nachname</th>
            <th>Vorname</th>
            <th>Abteilung</th>
            <th>Standort</th>
        </tr>
        <tr>
            <td><input ng-model="trainee_id"/></td>
            <td><input ng-model="trainee_lastName"/></td>
            <td><input ng-model="trainee_forename"/></td>
            <td><input ng-model="trainee_department"/></td>
            <td><input ng-model="trainee_location"/></td>
        </tr>
        <!--<tr>-->
        <!--<th>Mindestalter</th>-->
        <!--<th>Höchstalter</th>-->
        <!--<th>Ausbildungsanfang</th>-->
        <!--</tr>-->
        <!--<tr>-->
        <!--<td><input type="date" ng-model="min_age"/></td>-->
        <!--<td><input type="date" ng-model="max_age"/></td>-->
        <!--<td><input type="date" ng-model="filter_start_of_training"/></td>-->
        <!--</tr>-->
    </table>

    <table class="table">
        <tr>
            <th></th>
            <th>ID</th>
            <th>Nachname</th>
            <th>Vorname</th>
            <th>Geburtsdatum</th>
            <th>Job</th>
            <th>Ausbildungsanfang</th>
            <th></th>
        </tr>
        <tr bgcolor="#add8e6"
            ng-repeat-start="trainee in tctrl.trainees | filter:{id: trainee_id, lastName:trainee_lastName,
            forename: trainee_forename, departmentName: trainee_department,
            locationName: trainee_location}">

            <td>
                <button class="button" ng-if="trainee.expanded" ng-click="trainee.expanded = false"> -</button>
                <button class="button" ng-if="!trainee.expanded" ng-click="trainee.expanded = true"> +</button>
            </td>
            <td>{{trainee.id}}</td>
            <td>{{trainee.lastName}}</td>
            <td>{{trainee.forename}}</td>
            <td>{{trainee.birthday | date:'dd.MM.yyyy'}}</td>
            <td>{{trainee.jobName}}</td>
            <td>{{trainee.start_of_training | date:'dd.MM.yyyy'}}</td>
            <td></td>
        </tr>
        <tr ng-if="trainee.expanded" ng-init="tctrl.getSkillsByTraineeId(trainee.id)">
            <th colspan="3">Arbeitsplatz</th>
            <th colspan="2">Standort</th>
            <th colspan="2">Abteilung</th>
        </tr>
        <tr ng-if="trainee.expanded">
            <td colspan="3"></td>
            <td colspan="2">{{trainee.locationName}}</td>
            <td colspan="2">{{trainee.departmentName}}</td>
        </tr>
        <tr ng-if="trainee.expanded" ng-show="tctrl.traineeskills.length">
            <th colspan="3">Skills</th>
            <th colspan="2">Bezeichnung</th>
            <th colspan="3">Beschreibung</th>
        </tr>
        <tr ng-if="trainee.expanded" ng-repeat="skill in tctrl.traineeskills">
            <td colspan="2"></td>
            <td align="right">•</td>
            <td colspan="2">{{skill.name}}</td>
            <td colspan="3">{{skill.description}}</td>
        </tr>
        <tr ng-if="trainee.expanded" ng-repeat-end="">
            <td colspan="3"><a href="#/trainees/update" ng-click="tctrl.updateTraineeById(trainee.id)"
                               class="btn btn-default btn-sm">Auszubildenden bearbeiten</a></td>
            <td colspan="3"><a href="#/trainees/list" ng-click="tctrl.confirmDelete(trainee.id)" class="btn btn-default btn-sm">Auszubildenden löschen</a></td>
        </tr>
    </table>
</div>










